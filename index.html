<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Citizens United</title>
    <link rel="icon" type="image/x-icon" href="gavel.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="text.css">

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/ScrollToPlugin.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">

    <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.js" crossorigin="anonymous"></script>

    <!-- Include Textillate.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/textillate/0.4.0/jquery.textillate.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lettering.js/0.6.1/jquery.lettering.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.compat.min.css"/>

    <!-- typed -->
    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>

    <!-- open sans google font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet"/>
</head>

<!-- for the nav bar, i want to put a progress bar underlying it and then proper spacing between elements -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
    <nav id="navbar" class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container-fluid">
            <a  class="navbar-brand" href="#"></a>
            <a id="pop" class="navbar-brand" href="#section2">Citizens United</a>

        <style>
            /* pop element out of document flow */
            #pop {
                position: absolute;
                display: inline;
                left: 20px;
                z-index: 999;
            }  

            .navbar-toggler {
                z-index: 999;
            }

        </style>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="w-100 d-flex justify-content-center">
                    <ul class="navbar-nav d-flex gap-3">
                        <!-- Nav links -->
                        <li class="nav-item"><a class="nav-link" href="#section3">TL;DR</a></li>
                        <li class="nav-item"><a class="nav-link" href="#section4">HISTORY</a></li>
                        <li class="nav-item"><a class="nav-link" href="#section5">THE DECISION</a></li>
                        <li class="nav-item"><a class="nav-link" href="#section6">ANALYSIS</a></li>
                        <li clas="nav-item"><a class="nav-link" href="#section9">MOVING FORWARD</a></li>
                    </ul>
                </div> 
            </div>
        </div>
    </nav>

    <!-- title screen  -->
      <main class="container-fluid p-0">
        <section id="section2" class="section bs-primary-color">
            <div class="container">
                <div class="row justify-content-center text-center">
                    <div class="col-md-8 col-lg-6">
                        <img src="images/sc_edited.png" alt="Supreme Court" height=600px
                        class="position-absolute bottom-0 start-0 img-fluid" id="sc_edited">
                        <p id="title" class="left-center-box">The Effects of the 2010 Citizens United Decision</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- tldr -->
        <main class="container-fluid p-0">
            <section id="section3" class="section">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-8"></div> <!-- Empty space on the left -->
                        <div class="col-md-4">
                            <div id="tldr-body" class="ms-auto">
                                To save everyone a bit of time, the result of the Citizens United decision is one of the largest blows to the integrity of American democracy in the last decade. It removed the already faltering legal restraints on 
                                megacorporations acting purely for their own benefit, and works in 
                                variance with the legal basis it was argued over. 
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        <!-- history -->
        <main class="container-fluid p-0">
            <section id="section4" class="section bg-primary">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-md-8 col-lg-6 text-center">
                            <div class="title"><span class="material-icons">home</span> Section 4</div>
                            <p class="paragraph">HISTORY</p>
                        </div>
                    </div>
                </div>
            </section>

        <!-- the decision -->
        <main class="container-fluid p-0">
            <section id="section5" class="section bg-primary text-white">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-md-8 col-lg-6 text-center">
                            <div class="title"><span class="material-icons">home</span> Section 5</div>
                            <p class="paragraph">DECISION</p>
                        </div>
                    </div>
                </div>
            </section>

        <!-- analysis -->
        <main class="container-fluid p-0">
            <section id="section6" class="section bg-primary text-white">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-md-8 col-lg-6 text-center">
                            <div class="title"><span class="material-icons">home</span> Section 6</div>
                            <p class="paragraph">ANALYSIS 1</p>
                        </div>
                    </div>
                </div>
            </section>

        <!-- analysis 2 -->
        <main class="container-fluid p-0">
            <section id="section7" class="section bg-primary text-white">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-md-8 col-lg-6 text-center">
                            <div class="title"><span class="material-icons">home</span> Section 7</div>
                            <p class="paragraph">ANALYSIS 2</p>
                        </div>
                    </div>
                </div>
            </section>


        <!-- analysis 3 -->
        <main class="container-fluid p-0">
            <section id="section8" class="section bg-primary text-white">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-md-8 col-lg-6 text-center">
                            <div class="title"><span class="material-icons">home</span> Section 7</div>
                            <p class="paragraph">ANALYSIS 3</p>
                        </div>
                    </div>
                </div>
            </section>

        <!-- moving forward -->
        <main class="container-fluid p-0">
            <section id="section9" class="section section bg-primary text-white">
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-md-8 col-lg-6 text-center">
                            <div class="title"><span class="material-icons">home</span> Section 8</div>
                            <p class="paragraph">MOVING FORWARD</p>
                        </div>
                    </div>
                </div>
            </section>

    <!-- animation code  -->
    <!-- <script src="animation.js"></script> -->

    <script src="textAnn.js"></script>
    <!-- <script src="tldrAnn.js"></script> -->

    <script>
        // use a script tag or an external JS file
        document.addEventListener("DOMContentLoaded", (event) => {
            gsap.registerPlugin(ScrollTrigger,ScrollToPlugin)
            // fade out
            gsap.to("#sc_edited", {
                scrollTrigger: {
                    trigger: "#sc_edited",
                    start: "top center",
                    end: "bottom top",
                    toggleActions: "play reverse play reverse"
                },
                y: 0,
                opacity: 1,
                ease: "none"
            });


            // smooth transitions
            ScrollTrigger.create({
                trigger: "body",
                start: "20px top",
                end: "bottom bottom",
                toggleActions: "play none restart none",
                snap: {
                    snapTo: 1 / (document.querySelectorAll(".section").length -1), // snaps to each panel
                    duration: 0.5, // smooth snap duration (in seconds)
                    delay: 0.1,    // delay before snap occurs
                    ease: "power1.inOut" // easing function
                },
                markers: false
                });

                
            let typedInstance;
            ScrollTrigger.create({
                trigger: "#section3",
                start: "top 80%",
                end: "top bottom",
                onEnter: () => {
                    console.log('test')
                    if (typedInstance) {
                        typedInstance.destroy();
                    }
                    
                    console.log(document.querySelector("#tldr-title"));
                    typedInstance = new Typed("#tldr-title", {
                        strings: ['Why should I even care?'],
                        typeSpeed: 50,
                        backSpeed: 25,
                        backDelay: 1000,
                        loop: false
                    });
                    console.log(typeof typedInstance);
                },

                onLeave: () => {
                    if (typedInstance) {
                        typedInstance.destroy();
                    }
                }
            });
        });


    </script>
</body>
</html>